<!DOCTYPE html>
<html>
    <head>
        <title>Principle Components Analysis Visualize</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/bootstrap/dist/css/bootstrap.css" rel="stylesheet" media="screen">
	<link href="/lib/justified-nav.css" rel="stylesheet">
	<style type="text/css" rel="stylesheet">
	#graph {
		width: 100%;
		background-color: red;
		height: 500px;
	}
	</style>
    </head>
    <body>
        <div class="container">
		<div class="masthead">
		Hi <span id="username"></span>
		</div>
		<div id="graph"></div>
		<div class="row">
			<div class="col-lg-4">
				<h2>Filters</h2>
				<p>Be selective of your data!</p>
				<p><a class="btn btn-primary" href="#">Change Filters</a></p>
			</div>
			<div class="col-lg-4">
				<h2>Attributes</h2>
				<p>What attributes are you looking to PCA?</p>
				<p><a class="btn btn-primary" href="#">Change Attributes</a></p>
			</div>
			<div class="col-lg-4">
				<h2>Mouseover Includes</h2>
				<p>What items do you want to shove in mouseover?</p>
				<p><a class="btn btn-primary" href="#">Change Includes</a></p>
			</div>
		</div>
        </div>
        <script src="/lib/jquery.min.js"></script>
	<script src="/lib/jquery-ui.min.js"></script>
	<script src="/lib/async.js"></script>
        <script src="/bootstrap/dist/js/bootstrap.min.js"></script>
	<script type="text/javascript">
	$(document).ready( function( ){
		var username	= "Unknown User";
		var filters	= [ ];
		var attributes	= [ ];
		var includes	= [ ];

		$("#username").html( username );

		// Get the User ID, as well as the default filters, attributes, and includes.
		async.map( [ "user", "filters", "attributes", "includes" ], function( what, cb ){
			$.getJSON( "/api/" + what, function( data ){
				console.log( "GOT HERE" );
				if( data == false ){
					return cb( "Unable to get " + what );
				}
				return cb( null, data );
			} );
		}, function( err, res ){
			if( err ){
				return console.log( "Unable to grab defaults: " + err );
			}
			username	= res[0].username;
			filters		= res[1];
			attributes	= res[2];
			includes	= res[3];

			$("#username").html( username );
		} );
	} );
	</script>
    </body>
</html>
